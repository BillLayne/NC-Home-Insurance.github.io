document.addEventListener("DOMContentLoaded",function(){const n=document.getElementById("toolModal"),e=document.getElementById("toolModalTitle"),t=document.getElementById("toolFrame"),o=document.querySelector(".tool-modal-close"),a={"coverage-calculator":"coverage-calculator.html","deductible-analyzer":"deductible-analyzer.html","discount-checker":"discount-checker.html","home-inventory-worksheet":"home-inventory-worksheet.html"};function d(){n.classList.remove("active"),n.setAttribute("aria-hidden","true"),t.src="",document.body.style.overflow=""}document.querySelectorAll(".modal-trigger").forEach(d=>{d.addEventListener("click",function(d){d.preventDefault();const r=this.getAttribute("data-tool"),l=this.getAttribute("data-title");a[r]&&function(a,d){e.textContent=d,t.src=a,n.classList.add("active"),n.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden",o.focus()}(a[r],l)})}),o.addEventListener("click",d),n.addEventListener("click",function(e){e.target===n&&d()}),document.addEventListener("keydown",function(e){"Escape"===e.key&&n.classList.contains("active")&&d()}),window.addEventListener("message",function(n){"closeModal"===n.data&&d()})});const modalStyles=document.createElement("style");modalStyles.textContent="\n    /* Tool Modal Styles */\n    .tool-modal {\n        display: none;\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.8);\n        z-index: 10000;\n        opacity: 0;\n        transition: opacity 0.3s ease;\n    }\n    \n    .tool-modal.active {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        opacity: 1;\n    }\n    \n    .tool-modal-content {\n        background: white;\n        width: 90%;\n        max-width: 1200px;\n        height: 90vh;\n        border-radius: 16px;\n        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n        display: flex;\n        flex-direction: column;\n        transform: translateY(20px);\n        transition: transform 0.3s ease;\n    }\n    \n    .tool-modal.active .tool-modal-content {\n        transform: translateY(0);\n    }\n    \n    .tool-modal-header {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        padding: 1.5rem 2rem;\n        border-bottom: 1px solid #e2e8f0;\n        background: #f8fafc;\n        border-radius: 16px 16px 0 0;\n    }\n    \n    .tool-modal-header h2 {\n        margin: 0;\n        font-size: 1.5rem;\n        color: #1e293b;\n    }\n    \n    .tool-modal-close {\n        background: none;\n        border: none;\n        font-size: 2rem;\n        color: #64748b;\n        cursor: pointer;\n        width: 48px;\n        height: 48px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        border-radius: 8px;\n        transition: all 0.2s ease;\n    }\n    \n    .tool-modal-close:hover {\n        background: #e2e8f0;\n        color: #1e293b;\n    }\n    \n    .tool-modal-body {\n        flex: 1;\n        overflow: hidden;\n        border-radius: 0 0 16px 16px;\n    }\n    \n    #toolFrame {\n        width: 100%;\n        height: 100%;\n        border: none;\n        border-radius: 0 0 16px 16px;\n    }\n    \n    /* Mobile Responsive */\n    @media (max-width: 768px) {\n        .tool-modal-content {\n            width: 100%;\n            height: 100%;\n            max-width: 100%;\n            border-radius: 0;\n        }\n        \n        .tool-modal-header {\n            border-radius: 0;\n            padding: 1rem 1.5rem;\n        }\n        \n        .tool-modal-body {\n            border-radius: 0;\n        }\n        \n        #toolFrame {\n            border-radius: 0;\n        }\n    }\n    \n    /* Animation for modal appearance */\n    @keyframes modalSlideUp {\n        from {\n            transform: translateY(100%);\n            opacity: 0;\n        }\n        to {\n            transform: translateY(0);\n            opacity: 1;\n        }\n    }\n    \n    /* Prevent body scroll when modal is open */\n    body.modal-open {\n        overflow: hidden;\n    }\n",document.head.appendChild(modalStyles);